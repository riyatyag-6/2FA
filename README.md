
# 2FA Authentication Project

## Project Overview

This project is a user authentication system that includes:
- **Two-Factor Authentication (2FA)** using TOTP (Time-based One-Time Password) and QR codes.
- Secure **user registration** and **login** with bcrypt password hashing.
- A **password reset** feature through email with an email service configuration.
- **Session management** for authenticated user sessions.

## Table of Contents

- [Features](#features)
- [Environment Setup](#environment-setup)
- [Installation](#installation)
- [Configuration](#configuration)
- [Running the Project](#running-the-project)
- [Project Structure](#project-structure)
- [Troubleshooting](#troubleshooting)
- [Dependencies](#dependencies)

## Features

- **User Registration and Login**: Secure registration and login system with password hashing using bcrypt.
- **Two-Factor Authentication (2FA)**: Extra layer of security through TOTP, with a QR code generation for easy setup in authenticator apps.
- **Password Reset via Email**: Users can request a password reset, and an email with a reset token is sent to their registered email address.
- **Session Management**: Maintains session-based user authentication for a secure user experience.

## Environment Setup

Before setting up the project, make sure you have the following installed:

- [Node.js](https://nodejs.org/) (version 14 or later recommended)
- [MongoDB](https://www.mongodb.com/) (either a local installation or MongoDB Atlas for a cloud-based database)

## Installation

1. **Clone the Repository**:
   ```bash
   git clone https://github.com/yourusername/authentication_project.git
   cd authentication_project
   ```

2. **Install Dependencies**:
   ```bash
   npm install
   ```

3. **Install Global Dependencies** (if not already installed):
   ```bash
   npm install -g nodemon
   ```

## Configuration

### Environment Variables

Create a `.env` file in the root directory of the project and add the following environment variables:

```env
PORT=5000
# MongoDB URI
MONGODB_URI=mongodb://localhost:27017/authentication_project

# Nodemailer SMTP Configuration
EMAIL=your-email@gmail.com
PASS=your-email-password

# Session Secret Key
SESSION_SECRET=your-session-secret
```

- **MONGODB_URI**: Replace with your MongoDB URI if using MongoDB Atlas.
- **EMAIL** and **PASS**: For Gmail, set up an **App Password** in your Google account if using 2-Step Verification.
- **SESSION_SECRET**: A random string used to sign and encrypt session cookies.

### Gmail Setup for Password Reset Emails

If you're using Gmail for sending password reset emails:
1. Enable **2-Step Verification** on your Google account.
2. Generate an **App Password** for `PASS` in the `.env` file.

## Running the Project

1. **Start MongoDB**:
   - If MongoDB is installed locally, you can start it with:
     ```bash
     mongod
     ```

2. **Run the Application**:
   - To start the server with automatic reloading:
     ```bash
     nodemon app.js
     ```
   - Or start directly with Node:
     ```bash
     node app.js
     ```

3. **Access the Application**:
   - Open a web browser and navigate to [http://localhost:5000](http://localhost:5000).

## Troubleshooting

- **SMTP Errors**: Verify that `EMAIL` and `PASS` in your `.env` file are correct. For Gmail, ensure youâ€™re using an **App Password** if 2-Step Verification is enabled.
- **MongoDB Connection Issues**: Ensure MongoDB is running locally or check if `MONGODB_URI` is configured correctly for MongoDB Atlas.
- **2FA Not Working**: Ensure a valid QR code generator library (like `qrcode`) is installed and configured correctly. Also, check that the TOTP generated by the authenticator app matches the server-generated code.(Use Google authenticator)

## Dependencies

This project requires the following Node.js modules:

- **bcrypt**: For hashing passwords.
- **dotenv**: For loading environment variables.
- **express**: Web framework for Node.js.
- **express-session**: For managing user sessions.
- **mongodb**: MongoDB native driver for Node.js.
- **mongoose**: MongoDB object modeling for Node.js.
- **nodemailer**: For sending emails (e.g., for password reset).
- **speakeasy**: For generating and verifying TOTP codes.
- **qrcode**: For generating QR codes used in 2FA.

To install these dependencies, run:

```bash
npm install bcrypt dotenv express express-session mongodb mongoose nodemailer speakeasy qrcode
```

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for more details.

```

---

This `README.md` file provides a complete and well-organized overview of your project, setup instructions, configuration steps, and troubleshooting tips, ideal for GitHub documentation. Let me know if you need further adjustments!
